/* Sina Extension for Elementor v3.7.0 */
!function(s){"use strict";({instance:[],templateId:0,init:function(){this.renderPopup(),s("#sina-ext-hf-s-display-type").select2({ajax:{url:ajaxurl,dataType:"json",method:"post",delay:200,data:function(e){return{q:e.term,page:e.page,action:"sina_ext_get_posts_by_query",nonce:Sina_Ext_Theme_Builder.nonce}},processResults:function(e){return{results:e}},cache:!0},minimumInputLength:2}),s("body.post-type-sina-ext-template #wpcontent").on("click",".page-title-action, .row-title, .row-actions .edit > a",this.openPopup),s(document).on("click",".sina-ext-body-overlay,.sina-ext-template-edit-cross",this.closePopup).on("click",".sina-ext-tmp-save",this.savePost).on("click",".sina-ext-tmp-elementor",this.redirectEditPage).on("sina_ext_template_edit_popup_open",this.displayLocation).on("change","#sina-ext-template-type, #sina-ext-hf-display-type",this.displayLocation)},renderPopup:function(e){var t=wp.template("sina-ext-cpt-popup")({templatetype:Sina_Ext_Theme_Builder.templatetype,hflocation:Sina_Ext_Theme_Builder.hflocation,archivelocation:Sina_Ext_Theme_Builder.archivelocation,singlelocation:Sina_Ext_Theme_Builder.singlelocation,otherslocation:Sina_Ext_Theme_Builder.otherslocation,editor:Sina_Ext_Theme_Builder.editor,heading:Sina_Ext_Theme_Builder.labels});s("body").append(t)},openPopup:function(e){e.preventDefault();var t=s(this).closest("tr").attr("id"),a=null,e=null;t&&(e="post.php?post="+(a=t.replace("post-",""))+"&action=elementor"),s(".sina-ext-tmp-save").attr("data-tmpid",a),s(".sina-ext-tmp-elementor").attr({"data-link":e,"data-tmpid":a}),a?s.ajax({url:Sina_Ext_Theme_Builder.ajaxurl,data:{action:"sina_ext_get_template",nonce:Sina_Ext_Theme_Builder.nonce,tmpId:a},type:"POST",beforeSend:function(){},success:function(e){document.querySelector("#sina-ext-template-type option[value='"+e.data.tmpType+"']").selected="true",s("#sina-ext-template-title").attr("value",e.data.tmpTitle),s(".sina-ext-tmp-elementor").removeClass("disabled").removeAttr("disabled","disabled")},complete:function(e){s(document).trigger("sina_ext_template_edit_popup_open"),s(".hf-location:visible select, .archive-location:visible select, .single-location:visible select, .others-location:visible select").find("option[value='"+e.responseJSON.data.tmpLocation+"']")[0].selected="true",e.responseJSON.data.tmpSpLocation&&s.each(e.responseJSON.data.tmpSpLocation,function(e,t){t={id:e,text:t},t=new Option(t.text,t.id,!0,!0);s("#sina-ext-hf-s-display-type").append(t).trigger("change")}),s(".sina-ext-template-edit-popup-area").addClass("open-popup")},error:function(e){console.log(e)}}):(s(document).trigger("sina_ext_template_edit_popup_open"),s(".sina-ext-tmp-elementor").addClass("button disabled").attr("disabled","disabled"),s(".sina-ext-template-edit-popup-area").addClass("open-popup"))},closePopup:function(e){s(".sina-ext-template-edit-popup-area").removeClass("open-popup")},savePost:function(e){var t=s(this),a=e.target.dataset.tmpid||"",i=s("#sina-ext-template-title").val(),n=s("#sina-ext-template-type").val(),o=s(".hf-location:visible select, .archive-location:visible select, .single-location:visible select, .others-location:visible select").val(),e=s(".hf-s-location:visible select").val();s.ajax({url:Sina_Ext_Theme_Builder.ajaxurl,data:{action:"sina_ext_save_template",nonce:Sina_Ext_Theme_Builder.nonce,tmpId:a,title:i,tmpType:n,tmpDisplay:o,specificsDisplay:null!==(e=JSON.stringify(e))&&void 0!==e?e:null},type:"POST",beforeSend:function(){t.text(Sina_Ext_Theme_Builder.labels.buttons.save.saving),t.addClass("updating-message")},success:function(e){var t;""==a&&(e.data.id&&(t="post.php?post="+e.data.id+"&action=elementor"),s(".sina-ext-tmp-save").attr("data-tmpid",e.data.id),s(".sina-ext-tmp-elementor").attr({"data-link":t,"data-tmpid":e.data.id}),s(".sina-ext-tmp-elementor").removeClass("disabled").removeAttr("disabled","disabled"))},complete:function(e){t.removeClass("updating-message"),t.text(Sina_Ext_Theme_Builder.labels.buttons.save.saved)},error:function(e){console.log(e)}})},redirectEditPage:function(e){e.preventDefault();e=s(this),e=e.data("link")?e.data("link"):"";window.location.replace(Sina_Ext_Theme_Builder.adminURL+e)},displayLocation:function(e){var t=s("#sina-ext-template-type").val();s(".hf-s-location").addClass("hidden"),"single"===t?(s(".single-location").removeClass("hidden"),s(".hf-location, .archive-location, .others-location").addClass("hidden")):"archive"===t?(s(".archive-location").removeClass("hidden"),s(".hf-location, .single-location, .others-location").addClass("hidden")):"others"===t?(s(".others-location").removeClass("hidden"),s(".hf-location, .archive-location, .single-location").addClass("hidden")):(s(".hf-location").removeClass("hidden"),s(".archive-location, .single-location, .others-location").addClass("hidden"),setTimeout(function(){"specifics"===s("#sina-ext-hf-display-type").val()&&s(".hf-s-location").removeClass("hidden")},100))}}).init()}(jQuery);